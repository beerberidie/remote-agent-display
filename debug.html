<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Debug - Three.js Test</title>
<style>
  body { margin: 0; background: #0b1020; color: #4ade80; font-family: monospace; padding: 20px; }
  #log { background: #000; padding: 20px; border-radius: 8px; }
  .error { color: #ff6b6b; }
  .success { color: #4ade80; }
  canvas { border: 2px solid #4ade80; margin-top: 20px; }
</style>
</head>
<body>
<div id="log">
  <h2>Three.js Loading Test</h2>
  <div id="messages"></div>
</div>

<script type="module">
const messages = document.getElementById('messages');

function log(msg, isError = false) {
  const p = document.createElement('p');
  p.className = isError ? 'error' : 'success';
  p.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
  messages.appendChild(p);
  console.log(msg);
}

log('üöÄ Starting Three.js test...');

try {
  log('üì¶ Attempting to load THREE from esm.sh...');

  const THREE = await import('https://esm.sh/three@0.160.0');
  log('‚úÖ THREE loaded! Version: ' + THREE.REVISION);

  log('üì¶ Loading OrbitControls...');
  const { OrbitControls } = await import('https://esm.sh/three@0.160.0/examples/jsm/controls/OrbitControls.js');
  log('‚úÖ OrbitControls loaded!');

  log('üì¶ Loading CSS2DRenderer...');
  const { CSS2DRenderer } = await import('https://esm.sh/three@0.160.0/examples/jsm/renderers/CSS2DRenderer.js');
  log('‚úÖ CSS2DRenderer loaded!');
  
  log('üé® Creating scene...');
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0x0b1020);
  
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
  camera.position.z = 5;
  
  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(400, 400);
  document.body.appendChild(renderer.domElement);
  
  log('‚úÖ Renderer created!');
  
  // Create a rotating cube
  const geometry = new THREE.BoxGeometry(2, 2, 2);
  const material = new THREE.MeshBasicMaterial({ color: 0x60a5fa, wireframe: true });
  const cube = new THREE.Mesh(geometry, material);
  scene.add(cube);
  
  log('‚úÖ Cube added to scene!');
  
  // Add some lights
  const light = new THREE.PointLight(0xffffff, 1, 100);
  light.position.set(10, 10, 10);
  scene.add(light);
  
  log('üé¨ Starting animation...');
  
  function animate() {
    requestAnimationFrame(animate);
    cube.rotation.x += 0.01;
    cube.rotation.y += 0.01;
    renderer.render(scene, camera);
  }
  
  animate();
  
  log('‚úÖ SUCCESS! You should see a rotating blue cube below.');
  
} catch (error) {
  log('‚ùå ERROR: ' + error.message, true);
  log('‚ùå Stack: ' + error.stack, true);
  console.error('Full error object:', error);
}
</script>
</body>
</html>

